<!-- Centers image and applies caption if provided, with optional width control-->
{{ $width := "100%" }}
{{ $caption := .Title }}

{{ if .Title }}
  {{ if strings.Contains .Title "|" }}
    {{ $parts := split .Title "|" }}
    {{ $caption = trim (index $parts 0) " " }}
    {{ $width = trim (index $parts 1) " "  }}
  {{ end }}
{{ end }}

{{ if $caption }}
  <figure style="text-align: center;">
    <img src="{{ .Destination | safeURL }}" alt="{{ .Text }}" style="max-width: min(100%, {{ $width }});">
    <figcaption><i>{{ $caption }}</i></figcaption>
  </figure>
{{ else }}
  <p style="text-align: center;">
    <img src="{{ .Destination | safeURL }}" alt="{{ .Text }}" style="max-width: min(100%, {{ $width }});">
  </p>
{{ end }}

<!-- Centers image and applies caption if provided, with optional width control
{{ $width := "100%" }}
{{ $caption := .Title }}
{{ if .Title }}
  {{ if strings.Contains .Title "|" }}
    {{ $parts := split .Title "|" }}
    {{ $caption = trim (index $parts 0) " " }}
    {{ $width = trim (index $parts 1) " "  }}
  {{ end }}
{{ end }}
{{ if $caption }}
<figure style="text-align: center;">
<img src="{{ .Destination | safeURL }}" alt="{{ .Text }}" style="max-width: {{ $width }}; height: auto;" class="responsive-img">
<figcaption><i>{{ $caption }}</i></figcaption>
</figure>
{{ else }}
<p style="text-align: center;">
<img src="{{ .Destination | safeURL }}" alt="{{ .Text }}" style="max-width: {{ $width }}; height: auto;" class="responsive-img">
</p>
{{ end }}

<style>
img.responsive-img {
  max-width: 100% !important;
  height: auto;
}
</style>-->